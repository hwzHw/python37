<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>登录/注册</title>
    <script src="/static/js/lib/jquery/jquery-1.12.4.js"></script>
    <script src="/static/js/lib/bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="/static/js/lib/bootstrap-3.3.7-dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/static/users/css/login.css">

</head>
<body>
<div class="container">
    <!-- Nav tabs -->
    <p id="logo">潮流前线</p>
    <div class="row">
        <div class="col-md-4 col-md-offset-4">
            <div class="login">
                <img src="/static/images/banner2.png" style="width:100%; height: 500px" alt="Second slide">
                <ul class="nav nav-pills" role="tablist">
                    <li role="presentation" class="active"><a style="margin-top:-550px;" href="#home" aria-controls="home" role="tab" data-toggle="tab">登录</a></li>
                    <li role="presentation"><a style="margin-top:-550px; margin-left: 70px;" href="#profile" aria-controls="profile" role="tab" data-toggle="tab">注册</a></li>
                </ul>

                <!--Tab panes-->
                <div class="tab-content">
                    <span>{{msg}}</span>
                    <div role="tabpanel" class="tab-pane active" id="home">
                        <form class="form-horizontal" action="/users/user_login/" method="post">
                            {% csrf_token %}
                            <div class="form-group">
                                <label for="inputEmail3" class="col-sm-2  control-label" style="margin-top:-470px; color:red;">账号</label>
                                <div class="col-sm-10">
                                    <input style="margin-top:-470px; margin-left: 80px;" type="text" class="form-control" name="username1" id="inputEmail3" placeholder="Admin">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="inputPassword3" class="col-sm-2 control-label" style="margin-top:-420px; color:red;">密码</label>
                                <div class="col-sm-10">
                                    <input style="margin-top:-420px; margin-left: 80px;" type="password" name="password1" class="form-control" id="inputPassword3" placeholder="Password">
                                </div>
                            </div>
                            <div class="form-group">
                                <label  style="margin-top:-360px; color:red;" for="inputPassword5" class="col-sm-2 control-label">验证</label>
                                <div class="col-sm-4">
                                    <input style="margin-top:-360px; margin-left: 80px;" type="text" name="code" class="form-control" id="inputPassword" placeholder="验证码">
                                </div>
                                <div class="col-sm-4" style="margin-top:-360px; margin-left: 80px;">
                                    <a href="#" onclick="changeCode()"><img id="code" src="{% url 'users:code' %}" title="点击刷新"></a>
                                </div>

                            </div>
                            <div class="form-group">
                                <div class="col-sm-offset-2 col-sm-10">
                                    <div class="checkbox" style="margin-top:-320px;color:yellow;">
                                        <label>
                                            <input type="checkbox" name="check_box"> 记住密码
                                        </label>
                                        <span id="problem">登录遇到问题?</span>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-offset-2 col-sm-10">
                                    <button  style="margin-top:-470px;" type="submit" class="btn btn-default" id="button1">登录</button>
                                </div>
                            </div>
                            <p class="text-center" style="margin-top:-250px;color:red;"><br/>社交帐号登录</p>
                            <ul class="nav nav-pills col-md-offset-3 tubiao">
                                <li style="margin-top:-170px;" role="presentation"><a href="#"><img src="/static/users/img/headers/QQ.png"></a></li>
                                <li style="margin-top:-170px;margin-left: 40px;" role="presentation"><a href="#"><img src="/static/users/img/headers/weixin.png"></a></li>
                                <li style="margin-top:-170px;margin-left: 80px;" role="presentation"><a href="#"><img src="/static/users/img/headers/weibo.png"></a></li>
                                <li style="margin-top:-170px;margin-left: 130px;" role="presentation"><a href="#">其它</a></li>
                            </ul>
                        </form>
                    </div>

                    <div role="tabpanel" class="tab-pane" id="profile">
                        <div id="msg"></div>
                        <form class="form-horizontal" action="/users/user_register/" method="post">
                            {% csrf_token %}
                            <div class="form-group">
                                <label style="margin-top:-470px; color:red;" for="inputPassword4" class="col-sm-2 control-label">账号</label>
                                <div class="col-sm-10">
                                    <input style="margin-top:-470px; margin-left: 80px;" type="text" class="form-control" name="username" id="username" placeholder="Admin">
                                </div>
                            </div>
                            <div class="form-group">
                                <label style="margin-top:-420px; color:red;" for="inputPassword4" class="col-sm-2 control-label">密码</label>
                                <div class="col-sm-10">
                                    <input style="margin-top:-420px; margin-left: 80px;" type="password" class="form-control" name="password" id="password" placeholder="Password">
                                </div>
                            </div>
                            <div class="form-group">
                                <label style="margin-top:-360px; color:red;"  for="inputPassword4" class="col-sm-2 control-label">确认</label>
                                <div class="col-sm-10">
                                    <input style="margin-top:-360px; margin-left: 80px;" type="password" class="form-control" name="c_password" id="inputPassword4" placeholder="Password">
                                </div>
                            </div>
                            <div class="form-group">
                                <label style="margin-top:-310px; color:red;" for="inputPassword5" class="col-sm-2 control-label">验证</label>
                                <div class="col-sm-4">
                                    <input style="margin-top:-300px; margin-left: 80px;" type="text" name="code" class="form-control" id="inputPassword5" placeholder="验证码">
                                </div>
                                <div class="col-sm-4" style="margin-top:-300px; margin-left: 80px;">
                                    <a href="#" onclick="changeCode1()"><img id="code1" src="{% url 'users:code' %}" title="点击刷新"></a>
                                </div>

                            </div>
                            <div class="form-group">
                                <div class="col-sm-offset-2 col-sm-10" style="margin-top:-240px;">
                                    <button type="submit" class="btn btn-default" onclick="">注册</button>
                                </div>
                            </div>
                            <p class="text-center">点击 “注册” 即表示您同意并愿意遵守简书<br/>
                                <span class="text-primary">用户协议</span> 和 <span class="text-primary">隐私政策</span> 。</p>
                            <!--<p class="text-center">社交帐号登录</p>-->
                            <ul class="nav nav-pills col-md-offset-2 tubiao">
                                <li style="margin-top:-260px; margin-right: 240px;" role="presentation"><a href="{% url 'users:login1' %}">其它注册</a></li>
                                <li style="margin-top:-260px;margin-left: 80px;" role="presentation"><a href="#"><img src="/static/users/img/headers/QQ.png"></a></li>
                                <li style="margin-top:-260px;margin-left: 120px;" role="presentation"><a href="#"><img src="/static/users/img/headers/weixin.png"></a></li>
                                <li style="margin-top:-260px;margin-left: 160px;" role="presentation"><a href="#"><img src="/static/users/img/headers/weibo.png"></a></li>
                            </ul>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

    <script>
        function changeCode() {
//            document.getElementById("code").src = "/users/code?id="+ new Date().getTime()
              document.getElementById("code").src = "/users/code?id="+ Math.random()
        }
        function changeCode1() {
//            document.getElementById("code").src = "/users/code?id="+ new Date().getTime()
              document.getElementById("code1").src = "/users/code?id="+ Math.random()
        }

        $(function () {
         $("#username").on("blur",function () {
             u_name = $(this).val();
             $.ajax({
                 url:"/users/"+ u_name +"/check_username/",
                 method:"POST",
                 dataType:"json",
                 data:{"csrfmiddlewaretoken":"{{ csrf_token }}"},
                 success:function (data) {
                     console.info(data);
                     if (data.success) {
                         $("#msg").html("<span style='color:green'>"+ data.msg +"</span>")
                     }else {
                         $("#msg").html("<span style='color:red'>"+ data.msg +"</span>")
                     }
                 }
             })
         })
     })
    </script>
</body>
</html>
